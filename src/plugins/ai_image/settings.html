<div class="form-group">
    <label for="textPrompt" class="form-label">Text Prompt:</label>
    <input type="text" id="textPrompt" name="textPrompt" placeholder="Type something..." required class="form-input">
</div>


<!-- Dropdown Options -->
<div class="form-group dropdown-container">
    <!-- Image Model Dropdown -->
    <div class="form-group">
        <label for="imageModel" class="form-label">Image Model:</label>
        <select id="imageModel" name="imageModel" class="form-input" onchange="toggleQualityDropdown()">
            <option value="dall-e-2">DALL·E 2</option>
            <option value="dall-e-3" selected>DALL·E 3</option>
            <option value="gpt-image-1">GPT Image 1</option>
        </select>
    </div>

    <!-- Quality Dropdown -->
    <div class="form-group">
        <label for="quality" class="form-label">Quality:</label>
        <select id="quality" name="quality" class="form-input">
        </select>
    </div>
</div>

<div class="form-group">
    <label for="randomizePrompt" class="form-label">Randomize Text Prompt:</label>
    <div class="toggle-container">
        <input type="checkbox" id="randomizePrompt" name="randomizePrompt" class="toggle-checkbox" value="false" onclick="this.value=this.checked ? 'true' : 'false';">
        <label for="randomizePrompt" class="toggle-label"></label>
    </div>
</div>


<script>
    function toggleQualityDropdown(quality = "") {
        const imageModelDropdown = document.getElementById("imageModel");
        const qualityDropdown = document.getElementById("quality");
        const selectedModel = imageModelDropdown.value;

        // Clear out old options
        qualityDropdown.innerHTML = "";

        if (selectedModel === "dall-e-3") {
            qualityDropdown.add(new Option("HD", "hd"));
            qualityDropdown.add(new Option("Standard", "standard"));
        } 
        else if (selectedModel === "dall-e-2") {
            qualityDropdown.add(new Option("Standard", "standard"));
        } 
        else if (selectedModel === "gpt-image-1") {
            qualityDropdown.add(new Option("High", "high"));
            qualityDropdown.add(new Option("Medium", "medium"));
            qualityDropdown.add(new Option("Low", "low"));
        }

        if (quality != "") {
            qualityDropdown.value = quality;
        }
    }

    // populate form values from plugin settings
    document.addEventListener('DOMContentLoaded', () => {   
        // defaults
        var imageModel = 'dall-e-2'
        var quality = 'standard'

        if (loadPluginSettings) {
            document.getElementById('textPrompt').value = pluginSettings.textPrompt || '';
            document.getElementById('randomizePrompt').checked = pluginSettings.randomizePrompt || false;

            imageModel = pluginSettings.imageModel;
            quality = pluginSettings.quality;
        }

        document.getElementById('imageModel').value = imageModel;
        toggleQualityDropdown(quality)
    });
</script>
